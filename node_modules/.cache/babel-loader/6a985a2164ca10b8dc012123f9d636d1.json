{"ast":null,"code":"import Firebase from '../../config/firebase';\nimport firebase from 'firebase'; // import history from 'history/createBrowserHistory'\n\nimport useHistory from 'react-router-dom';\nimport { useStore } from 'react-redux';\n\nconst set_data = data => {\n  return dispatch => {\n    // console.log(data)\n    dispatch({\n      type: \"set_data\",\n      payload: {\n        name: 'M'\n      }\n    });\n  };\n};\n\nconst facebook_login = history => {\n  // console.log(\"facebook_login.......\")\n  return dispatch => {\n    var provider = new firebase.auth.FacebookAuthProvider(); // provider.setCustomParameters({\n    //     'display': 'popup'\n    //   });\n\n    firebase.auth().signInWithPopup(provider).then(function (result) {\n      // This gives you a Facebook Access Token. You can use it to access the Facebook API.\n      var token = result.credential.accessToken; // The signed-in user info.\n\n      var user = result.user;\n      let create_user = {\n        name: user.displayName,\n        email: user.email,\n        profile: user.photoURL,\n        uid: user.uid\n      };\n      firebase.database().ref('/').child(`users/${user.uid}`).set(create_user).then(() => {\n        dispatch({\n          type: \"SETUSER\",\n          payload: create_user\n        }); // alert(\"user login Succesful!\");\n\n        history.push('/chat');\n      }); // ...\n      // console.log('user==ac=>',create_user)\n    }).catch(function (error) {\n      // Handle Errors here.\n      var errorCode = error.code;\n      var errorMessage = error.message;\n      console.log(errorMessage); // The email of the user's account used.\n\n      var email = error.email; // The firebase.auth.AuthCredential type that was used.\n\n      var credential = error.credential; // ...\n    });\n  };\n};\n\nconst get_users = () => {\n  return dispatch => {\n    let users = [];\n    firebase.database().ref('/').child('users').on('child_added', data => {\n      users.push(data.val()); // console.log(\"firebase.database==>\",data.val())\n\n      dispatch({\n        type: \"SETFIERBASEUASERS\",\n        payload: users\n      });\n    });\n  };\n};\n\nexport { // set_data,\nfacebook_login, get_users };","map":{"version":3,"sources":["C:/Users/Mudassir Mukhtar/Desktop/web/OLX-PK/src/store/action/index.jsx"],"names":["Firebase","firebase","useHistory","useStore","set_data","data","dispatch","type","payload","name","facebook_login","history","provider","auth","FacebookAuthProvider","signInWithPopup","then","result","token","credential","accessToken","user","create_user","displayName","email","profile","photoURL","uid","database","ref","child","set","push","catch","error","errorCode","code","errorMessage","message","console","log","get_users","users","on","val"],"mappings":"AAAA,OAAOA,QAAP,MAAqB,uBAArB;AACA,OAAOC,QAAP,MAAqB,UAArB,C,CACA;;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,QAAT,QAAyB,aAAzB;;AACA,MAAMC,QAAQ,GAAIC,IAAD,IAAU;AACvB,SAAQC,QAAD,IAAc;AACjB;AACAA,IAAAA,QAAQ,CAAC;AAAEC,MAAAA,IAAI,EAAE,UAAR;AAAoBC,MAAAA,OAAO,EAAE;AAACC,QAAAA,IAAI,EAAC;AAAN;AAA7B,KAAD,CAAR;AACH,GAHD;AAIH,CALD;;AAMA,MAAMC,cAAc,GAAEC,OAAD,IAAW;AACpB;AACA,SAAQL,QAAD,IAAc;AACd,QAAIM,QAAQ,GAAG,IAAIX,QAAQ,CAACY,IAAT,CAAcC,oBAAlB,EAAf,CADc,CAEjB;AACA;AACA;;AACAb,IAAAA,QAAQ,CAACY,IAAT,GAAgBE,eAAhB,CAAgCH,QAAhC,EACII,IADJ,CACS,UAASC,MAAT,EAAiB;AACtB;AACA,UAAIC,KAAK,GAAGD,MAAM,CAACE,UAAP,CAAkBC,WAA9B,CAFsB,CAGtB;;AACA,UAAIC,IAAI,GAAGJ,MAAM,CAACI,IAAlB;AACA,UAAIC,WAAW,GAAC;AACdb,QAAAA,IAAI,EAACY,IAAI,CAACE,WADI;AAEdC,QAAAA,KAAK,EAACH,IAAI,CAACG,KAFG;AAGdC,QAAAA,OAAO,EAACJ,IAAI,CAACK,QAHC;AAIdC,QAAAA,GAAG,EAACN,IAAI,CAACM;AAJK,OAAhB;AAMA1B,MAAAA,QAAQ,CAAC2B,QAAT,GAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,KAA7B,CAAoC,SAAQT,IAAI,CAACM,GAAI,EAArD,EAAwDI,GAAxD,CAA4DT,WAA5D,EACCN,IADD,CACM,MAAI;AACRV,QAAAA,QAAQ,CAAC;AAACC,UAAAA,IAAI,EAAC,SAAN;AAAgBC,UAAAA,OAAO,EAACc;AAAxB,SAAD,CAAR,CADQ,CAER;;AACAX,QAAAA,OAAO,CAACqB,IAAR,CAAa,OAAb;AAED,OAND,EAXsB,CAkBtB;AACA;AACD,KArBH,EAqBKC,KArBL,CAqBW,UAASC,KAAT,EAAgB;AACvB;AACA,UAAIC,SAAS,GAAGD,KAAK,CAACE,IAAtB;AACA,UAAIC,YAAY,GAAGH,KAAK,CAACI,OAAzB;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ,EAJuB,CAKvB;;AACA,UAAIb,KAAK,GAAGU,KAAK,CAACV,KAAlB,CANuB,CAOvB;;AACA,UAAIL,UAAU,GAAGe,KAAK,CAACf,UAAvB,CARuB,CASvB;AACD,KA/BH;AAiCH,GAtCD;AAuCX,CAzCD;;AA6CA,MAAMsB,SAAS,GAAC,MAAI;AAClB,SAAQnC,QAAD,IAAc;AACnB,QAAIoC,KAAK,GAAC,EAAV;AACAzC,IAAAA,QAAQ,CAAC2B,QAAT,GAAoBC,GAApB,CAAwB,GAAxB,EAA6BC,KAA7B,CAAmC,OAAnC,EAA4Ca,EAA5C,CAA+C,aAA/C,EAA8DtC,IAAD,IAAQ;AACnEqC,MAAAA,KAAK,CAACV,IAAN,CAAW3B,IAAI,CAACuC,GAAL,EAAX,EADmE,CAEnE;;AAEAtC,MAAAA,QAAQ,CAAC;AAACC,QAAAA,IAAI,EAAC,mBAAN;AAA0BC,QAAAA,OAAO,EAACkC;AAAlC,OAAD,CAAR;AACD,KALD;AAMC,GARH;AASC,CAVH;;AAWA,SACI;AACAhC,cAFJ,EAGI+B,SAHJ","sourcesContent":["import Firebase from '../../config/firebase'\r\nimport firebase from 'firebase'\r\n// import history from 'history/createBrowserHistory'\r\nimport useHistory from 'react-router-dom'\r\nimport { useStore } from 'react-redux'\r\nconst set_data = (data) => {\r\n    return (dispatch) => {\r\n        // console.log(data)\r\n        dispatch({ type: \"set_data\", payload: {name:'M'} })\r\n    }\r\n}\r\nconst facebook_login=(history)=>{\r\n            // console.log(\"facebook_login.......\")\r\n            return (dispatch) => {\r\n                   var provider = new firebase.auth.FacebookAuthProvider();\r\n                // provider.setCustomParameters({\r\n                //     'display': 'popup'\r\n                //   });\r\n                firebase.auth().signInWithPopup(provider)\r\n                   .then(function(result) {\r\n                    // This gives you a Facebook Access Token. You can use it to access the Facebook API.\r\n                    var token = result.credential.accessToken;\r\n                    // The signed-in user info.\r\n                    var user = result.user;\r\n                    let create_user={\r\n                      name:user.displayName,\r\n                      email:user.email,\r\n                      profile:user.photoURL,\r\n                      uid:user.uid\r\n                    }\r\n                    firebase.database().ref('/').child(`users/${user.uid}`).set(create_user)\r\n                    .then(()=>{\r\n                      dispatch({type:\"SETUSER\",payload:create_user})\r\n                      // alert(\"user login Succesful!\");\r\n                      history.push('/chat')\r\n        \r\n                    })\r\n                    // ...\r\n                    // console.log('user==ac=>',create_user)\r\n                  }).catch(function(error) {\r\n                    // Handle Errors here.\r\n                    var errorCode = error.code;\r\n                    var errorMessage = error.message;\r\n                    console.log(errorMessage)\r\n                    // The email of the user's account used.\r\n                    var email = error.email;\r\n                    // The firebase.auth.AuthCredential type that was used.\r\n                    var credential = error.credential;\r\n                    // ...\r\n                  });\r\n\r\n            }\r\n}\r\n\r\n\r\n\r\nconst get_users=()=>{\r\n  return (dispatch) => {\r\n    let users=[];\r\n    firebase.database().ref('/').child('users').on('child_added',(data)=>{\r\n      users.push(data.val())\r\n      // console.log(\"firebase.database==>\",data.val())\r\n     \r\n      dispatch({type:\"SETFIERBASEUASERS\",payload:users })\r\n    })\r\n    }\r\n  }\r\nexport { \r\n    // set_data,\r\n    facebook_login,\r\n    get_users\r\n }   "]},"metadata":{},"sourceType":"module"}